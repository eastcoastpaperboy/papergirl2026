<!doctype html>
<html>
<head>
<meta charset="utf-8">
<style>
* {margin:0;padding:0;}
body {background:#111;}
canvas {display:block;margin:auto;image-rendering:pixelated;}
</style>
</head>
<body>
<canvas id="c" width="512" height="384"></canvas>
<script>
const W=512,H=384;
const ctx=document.getElementById('c').getContext('2d');
ctx.imageSmoothingEnabled=false;

let scroll=0;

function roadW(y){return 140+Math.floor(y/6);}
function sideW(y){return 48+Math.floor(y/24);}

function drawBase(){
  for(let y=0;y<H;y++){
    const xR=780-y,rw=roadW(y),sw=sideW(y);
    const rL=xR-rw,cL=rL-4,siL=cL-sw;
    if(siL>0){ctx.fillStyle='#2a8a2a';ctx.fillRect(0,y,siL,1);}
    ctx.fillStyle='#bebebe';ctx.fillRect(Math.max(0,siL),y,sw,1);
    if((y+Math.floor(scroll))%48===0){ctx.fillStyle='#999';ctx.fillRect(Math.max(0,siL),y,sw,1);}
    ctx.fillStyle='#555';ctx.fillRect(cL,y,4,1);
    if(rL<W){ctx.fillStyle='#222';ctx.fillRect(Math.max(0,rL),y,W-Math.max(0,rL),1);}
  }
}

function drawPlayer(){
  const py=280;
  const xR=780-py,rw=roadW(py),sw=sideW(py);
  const rL=xR-rw,cL=rL-4,siL=cL-sw;
  const px=siL+sw*0.4;
  // Draw simple box player for now
  ctx.fillStyle='#00f';ctx.fillRect(px-16,py-40,32,40);
  ctx.fillStyle='#ff0';ctx.fillRect(px-8,py-50,16,12);
}

function loop(){
  scroll-=1.5;
  ctx.clearRect(0,0,W,H);
  drawBase();
  drawPlayer();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
